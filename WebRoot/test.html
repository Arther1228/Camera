<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=7,IE=9,IE=10" />
<title>指定起点重现率计算</title>

<!-- 初始化ArcGIS JS API -->
<script type="text/javascript" src="/Camera/commons/scgis/_scgis_inc.js"></script>

<link rel="stylesheet" type="text/css" href="/Camera/skin/darkBlue/css/global.css" />
<link rel="stylesheet" type="text/css" href="/Camera/skin/nationalDay/css/global.css" />

<script type="text/javascript" src="/Camera/gis/dwgis.js"></script>


<script src="/Camera/scripts/javascript/jquery.js" type="text/javascript"></script>
<script src="/Camera/scripts/javascript/swep.js" type="text/javascript"></script>
<script src="/Camera/scripts/javascript/scrollbar.js" type="text/javascript"></script>

<script>
	dojo.require("esri.map");
	dojo.require("esri.toolbars.draw");
	dojo.require("esri.tasks.query");
	dojo.require("esri.tasks.gp");
	dojo.require("esri.tasks.route");
	dojo.require("esri.symbols.SimpleLineSymbol");
	dojo.require("esri.tasks.BufferParameters");
	dojo.require("esri.tasks.GeometryService");
	dojo.require("esri.tasks.RelationParameters");
	dojo.require("esri.tasks.LengthsParameters");
	
	
	//监听事件变量
	var mapOnClick_addBarriers_connect, mapOnClick_addStartStop_connect;
	//全局变量
	var resultTemplate;
	
	//以下变量是用来计算最小路径（最小路径相等时，比较路径长度）
	var lastestResultCount = 0;     //当前最短路径的重现率
	var lastestRoute = null;        //当前最短路径的graphic
	var lastestRouteLength = 0;     //当前最短路径的长度
	var solveResultCount = 0;       //路径求解结果的计数器
	
	//以下两个参数是用来控制对话框的出现时刻
	var prerouteParamsCount = 0;    //提交求解最短路径的计数器
	var routedParamsCount = 0;      //正在求解最短路径的计数器

	//最近一次的最短路径
	var lastRoute=null;
	var lastRouteCameraNum=0;
	var lastRouteLength=0;
	
	var errorCount=0;
	
	var map ;  //不加这个IE里面就显示不了
	
	function init() {
		map = new esri.Map("map",{logo:false,slider:false}); //创建map,加载到地图
		basemap = new esri.layers.ArcGISTiledMapServiceLayer("http://192.168.97.20:8399/arcgis/rest/services/PCGISTiled/MapServer");
	
		map.addLayer(basemap);
	}
	

	dojo.ready(init);
	
</script>

</head>
<body class="claro">

<div class="dtB20" style="padding:14px;">
	<a href="#" id="selectedPolygon" name="selectedPolygon" onclick="drawPolygon();" class="gn1">指定区域</a>
	<a href="#" id="selectedStartPoint" name="selectedStartPoint" onclick="drawStartPoints();" class="gn1">选择起始点</a>
	<a href="#" id="addBarriers" name="addBarriers" onclick="addBarriers();" class="gn1">施工建议</a>
	<a href="#" id="clearBarriers" name="clearBarriers" onclick="clearBarriers();" class="gn1">取消建议</a>
	<a href="#" id="clearbutton" name="clearbutton" onclick="mapClear();" class="gn1">清除图形</a>
</div>
	<div id="map" style="width: 100%; height: 100%;  border: 0px solid #000;"></div>
</body>
</html>